import streamlit as st
import random
from datetime import datetime

# ---------------------------
# Page Config
# ---------------------------
st.set_page_config(
    page_title="âœ¨ MBTI ì§„ë¡œ ì¶”ì²œ ìŠ¤íŠœë””ì˜¤ âœ¨",
    page_icon="ğŸ§­",
    layout="wide",
)

# ---------------------------
# Fancy CSS (Glassmorphism + Gradient + Buttons)
# ---------------------------
CSS = """
<style>
/* Background */
.stApp {
  background: radial-gradient(circle at 10% 10%, #a78bfa 0%, rgba(167,139,250,0.0) 35%),
              radial-gradient(circle at 90% 20%, #60a5fa 0%, rgba(96,165,250,0.0) 40%),
              radial-gradient(circle at 50% 90%, #fb7185 0%, rgba(251,113,133,0.0) 45%),
              linear-gradient(120deg, #0b1020 0%, #0b1020 35%, #070a14 100%);
  color: #e5e7eb;
}

/* Remove top padding a bit */
.block-container { padding-top: 1.3rem; }

/* Headline glow */
.glow-title {
  font-size: 2.3rem;
  font-weight: 800;
  letter-spacing: -0.5px;
  text-shadow: 0 0 12px rgba(167,139,250,.45), 0 0 18px rgba(96,165,250,.25);
}

/* Subtitle */
.subtle {
  color: rgba(229,231,235,0.85);
  font-size: 1.05rem;
}

/* Glass cards */
.glass {
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 10px 30px rgba(0,0,0,0.28);
  border-radius: 18px;
  padding: 18px 18px;
  backdrop-filter: blur(10px);
}

/* Neon pill */
.pill {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 999px;
  background: rgba(167,139,250,0.12);
  border: 1px solid rgba(167,139,250,0.30);
  color: rgba(229,231,235,0.95);
  font-weight: 600;
  margin-right: 8px;
  margin-bottom: 8px;
}

/* Big emoji */
.big-emoji { font-size: 2rem; }

/* Divider */
.hr {
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
  margin: 14px 0 18px;
}

/* Button-like metric */
.metricish {
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 16px;
  padding: 14px 14px;
}

/* Link styles */
a { color: #93c5fd !important; text-decoration: none; }
a:hover { text-decoration: underline; }

/* Sidebar */
section[data-testid="stSidebar"] {
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border-right: 1px solid rgba(255,255,255,0.08);
}

/* Streamlit default elements tweak */
div[data-testid="stMetricValue"] { color: #e5e7eb; }
div[data-testid="stMetricLabel"] { color: rgba(229,231,235,0.70); }
</style>
"""
st.markdown(CSS, unsafe_allow_html=True)

# ---------------------------
# Data: MBTI â†’ Careers, strengths, tips
# (êµìœ¡ìš© ì˜ˆì‹œ: í¸ê²¬ì„ ê°•í™”í•˜ì§€ ì•Šë„ë¡ "ê°€ëŠ¥ì„± ì¤‘ì‹¬"ìœ¼ë¡œ ì„¤ê³„)
# ---------------------------
MBTI_DATA = {
    "INTJ": {
        "nickname": "ì „ëµê°€ ğŸ§ â™Ÿï¸",
        "strengths": ["ì¥ê¸° ì „ëµ ìˆ˜ë¦½", "ë¬¸ì œ êµ¬ì¡°í™”", "ë…ë¦½ì  íƒêµ¬", "íš¨ìœ¨ ìµœì í™”"],
        "careers": ["ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸ ğŸ“Š", "ì „ëµ ì»¨ì„¤í„´íŠ¸ ğŸ§©", "AI/ML ì—”ì§€ë‹ˆì–´ ğŸ¤–", "ì œí’ˆ ë§¤ë‹ˆì €(PM) ğŸ§­", "ë¦¬ì„œì²˜ ğŸ”¬"],
        "why": ["ë³µì¡í•œ ë¬¸ì œë¥¼ ëª¨ë¸ë¡œ ë‹¨ìˆœí™”í•˜ëŠ” ë° ê°•í•¨", "í° ê·¸ë¦¼ì„ ê·¸ë¦¬ê³  ë¡œë“œë§µì„ ì§œëŠ” ì„±í–¥", "ê·¼ê±° ê¸°ë°˜ ì˜ì‚¬ê²°ì • ì„ í˜¸"],
        "learn": ["ì¼€ì´ìŠ¤ ìŠ¤í„°ë””(ì»¨ì„¤íŒ…/PM)", "íŒŒì´ì¬Â·í†µê³„Â·ë¨¸ì‹ ëŸ¬ë‹ ê¸°ì´ˆ", "ë…¼ë¬¸/ë¦¬í¬íŠ¸ ìš”ì•½ í›ˆë ¨", "OKR/ë¡œë“œë§µ ì‘ì„± ì—°ìŠµ"],
    },
    "INTP": {
        "nickname": "íƒêµ¬ì ğŸ§ªğŸ§ ",
        "strengths": ["ê°œë…í™”", "ë…¼ë¦¬ì  ë¶„ì„", "ìƒˆë¡œìš´ ì•„ì´ë””ì–´", "í˜¸ê¸°ì‹¬"],
        "careers": ["ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ ğŸ’»", "ì—°êµ¬ì› ğŸ”¬", "ë°ì´í„° ë¶„ì„ê°€ ğŸ“ˆ", "ë³´ì•ˆ ì „ë¬¸ê°€ ğŸ›¡ï¸", "ê²Œì„/ì‹œë®¬ë ˆì´ì…˜ ê°œë°œ ğŸ®"],
        "why": ["ì›ë¦¬ì™€ êµ¬ì¡°ë¥¼ íŒŒê³ ë“œëŠ” í•™ìŠµ ë°©ì‹", "ìƒˆë¡œìš´ ì‹œìŠ¤í…œ ì„¤ê³„/ê°œì„ ì— í¥ë¯¸", "í˜¼ì ê¹Šê²Œ ëª°ì… ê°€ëŠ¥"],
        "learn": ["ìë£Œêµ¬ì¡°Â·ì•Œê³ ë¦¬ì¦˜", "ì˜¤í”ˆì†ŒìŠ¤ ê¸°ì—¬", "ì‚¬ì´ë“œ í”„ë¡œì íŠ¸(ìë™í™”/íˆ´)", "ë…¼ë¦¬ì  ê¸€ì“°ê¸°(ì„¤ëª…ë ¥ ê°•í™”)"],
    },
    "ENTJ": {
        "nickname": "ì§€íœ˜ê´€ ğŸ‘‘ğŸš€",
        "strengths": ["ë¦¬ë”ì‹­", "ëª©í‘œ ë‹¬ì„±", "ê²°ë‹¨ë ¥", "ì¡°ì§ ìš´ì˜"],
        "careers": ["ì‚¬ì—…ê°œë°œ(BD) ğŸ¤", "í”„ë¡œë•íŠ¸ ë¦¬ë”/PM ğŸ§­", "ê²½ì˜/ì „ëµ ê¸°íš ğŸ—ºï¸", "ìŠ¤íƒ€íŠ¸ì—… ì°½ì—… ğŸ§¨", "ì„¸ì¼ì¦ˆ ë¦¬ë” ğŸ¯"],
        "why": ["ì„±ê³¼ ì¤‘ì‹¬ìœ¼ë¡œ íŒ€ì„ ì›€ì§ì´ëŠ” ì—­ëŸ‰", "ì˜ì‚¬ê²°ì •ê³¼ ì‹¤í–‰ ë“œë¼ì´ë¸Œê°€ ë¹ ë¦„", "ë¦¬ì†ŒìŠ¤ ë°°ë¶„/ìš°ì„ ìˆœìœ„ ì„¤ì • ëŠ¥ë ¥"],
        "learn": ["ë¦¬ë”ì‹­/ì»¤ë®¤ë‹ˆì¼€ì´ì…˜", "ì¬ë¬´Â·ì‹œì¥ ë¶„ì„", "í”¼ì¹˜ë± ì‘ì„±", "í”„ë¡œì íŠ¸ ê´€ë¦¬(Agile)"],
    },
    "ENTP": {
        "nickname": "ë³€ë¡ ê°€ âš¡ğŸ—£ï¸",
        "strengths": ["ì°½ì˜ì  ë°œìƒ", "ì•„ì´ë””ì–´ í™•ì¥", "ì„¤ë“", "ë¹ ë¥¸ í•™ìŠµ"],
        "careers": ["ë§ˆì¼€íŒ…/ê·¸ë¡œìŠ¤ ğŸ“£", "ì°½ì—…/ì‹ ì‚¬ì—… ğŸ§¨", "í¬ë¦¬ì—ì´í‹°ë¸Œ ë””ë ‰í„° ğŸ¨", "ì½˜í…ì¸  ê¸°íš ğŸ“", "ì†”ë£¨ì…˜ ì»¨ì„¤í„´íŠ¸ ğŸ§ "],
        "why": ["ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ë°œê²¬í•˜ê³  ì‹¤í—˜í•˜ëŠ” ê²ƒì„ ì¦ê¹€", "ì‚¬ëŒì„ ì„¤ë“í•˜ê³  ìŠ¤í† ë¦¬ë¥¼ ë§Œë“œëŠ” í˜", "ë³€í™”ê°€ í° í™˜ê²½ì—ì„œ ê°•í•¨"],
        "learn": ["A/B í…ŒìŠ¤íŠ¸ ì‚¬ê³ ", "ë¸Œëœë”©/ì¹´í”¼ë¼ì´íŒ…", "ë°œí‘œ/í† ë¡  í›ˆë ¨", "í”„ë¡œí† íƒ€ì´í•‘(ë…¸ì½”ë“œ/ì½”ë“œ)"],
    },

    "INFJ": {
        "nickname": "ì˜¹í˜¸ì ğŸŒ™ğŸ’",
        "strengths": ["í†µì°°", "ê³µê°", "ê°€ì¹˜ ì§€í–¥", "ì˜ë¯¸ ì¶”êµ¬"],
        "careers": ["ìƒë‹´/ì½”ì¹­ ğŸ§‘â€ğŸ«", "êµìœ¡ ê¸°íš ğŸ“š", "UX ë¦¬ì„œì²˜ ğŸ”", "HR/ì¡°ì§ë¬¸í™” ğŸŒ±", "ì‚¬íšŒí˜ì‹ /NGO ğŸŒ"],
        "why": ["ì‚¬ëŒì˜ ë™ê¸°ì™€ ë§¥ë½ì„ ì´í•´í•˜ëŠ” ëŠ¥ë ¥", "ì¢‹ì€ ë³€í™”ë¥¼ ì„¤ê³„í•˜ëŠ” ë° ê´€ì‹¬", "ê¹Šì´ ìˆëŠ” ê´€ê³„/ë¯¸ì…˜ ê¸°ë°˜ ì—…ë¬´ ì„ í˜¸"],
        "learn": ["ì¸í„°ë·°/ë¦¬ì„œì¹˜ ê¸°ë²•", "ì‹¬ë¦¬Â·êµìœ¡í•™ ê¸°ì´ˆ", "í¬íŠ¸í´ë¦¬ì˜¤(ì¼€ì´ìŠ¤ ì •ë¦¬)", "í¼ì‹¤ë¦¬í…Œì´ì…˜"],
    },
    "INFP": {
        "nickname": "ì¤‘ì¬ì ğŸ•Šï¸ğŸ¨",
        "strengths": ["ì°½ì˜ì„±", "ê°€ì¹˜ ì¤‘ì‹¬", "ê°ìˆ˜ì„±", "ëª°ì…"],
        "careers": ["ì½˜í…ì¸ /ì‘ê°€ âœï¸", "ë¸Œëœë“œ ë””ìì´ë„ˆ ğŸ¨", "ì˜ìƒ/í¸ì§‘ ğŸ¬", "UX ë””ìì´ë„ˆ ğŸ§©", "ë¬¸í™”ê¸°íš ğŸ­"],
        "why": ["ê°œì„±ê³¼ ë©”ì‹œì§€ë¥¼ ë‹´ëŠ” ì‘ì—…ì— ê°•í•¨", "ê³µê°ì„ ì´ëŒì–´ë‚´ëŠ” ìŠ¤í† ë¦¬í…”ë§", "ìê¸°ë§Œì˜ ì„¸ê³„ê´€ êµ¬ì¶•"],
        "learn": ["ì‘í’ˆ/í”„ë¡œì íŠ¸ ì•„ì¹´ì´ë¹™", "ë””ìì¸ íˆ´(í”¼ê·¸ë§ˆ ë“±) ê¸°ì´ˆ", "ìŠ¤í† ë¦¬í…”ë§ êµ¬ì¡°", "í¬ë¦¬í‹±(í”¼ë“œë°±) ë£¨í‹´"],
    },
    "ENFJ": {
        "nickname": "ì„ ë„ì ğŸŒŸğŸ¤—",
        "strengths": ["ì†Œí†µ", "ë™ê¸°ë¶€ì—¬", "íŒ€ ë¹Œë”©", "ë¦¬ë”ì‹­"],
        "careers": ["êµìœ¡/ê°•ì‚¬ ğŸ¤", "HR/ì±„ìš© ğŸ§²", "ì»¤ë®¤ë‹ˆí‹° ë§¤ë‹ˆì € ğŸ«¶", "PR/ë¸Œëœë”© ğŸ“¢", "í”„ë¡œì íŠ¸ ë§¤ë‹ˆì € ğŸ—‚ï¸"],
        "why": ["ì‚¬ëŒì„ ì„±ì¥ì‹œí‚¤ê³  ì—°ê²°í•˜ëŠ” ëŠ¥ë ¥", "ë¶„ìœ„ê¸°/ê´€ê³„ë¥¼ ì„¤ê³„í•˜ëŠ” í˜", "í˜‘ì—… ì¤‘ì‹¬ í™˜ê²½ì—ì„œ ì„±ê³¼"],
        "learn": ["í¼ì‹¤ë¦¬í…Œì´ì…˜/ì½”ì¹­ ìŠ¤í‚¬", "ì„¤ë“ í”„ë ˆì„(ìŠ¤í† ë¦¬-ê·¼ê±°-í–‰ë™)", "ê°ˆë“±ê´€ë¦¬", "í”„ë¡œì íŠ¸ ìš´ì˜"],
    },
    "ENFP": {
        "nickname": "í™œë™ê°€ ğŸ‰ğŸ”¥",
        "strengths": ["ì—ë„ˆì§€", "ì•„ì´ë””ì–´", "ê³µê°", "ë„¤íŠ¸ì›Œí‚¹"],
        "careers": ["ë§ˆì¼€íŒ…/ë¸Œëœë“œ ğŸ“£", "ì½˜í…ì¸  í¬ë¦¬ì—ì´í„° ğŸ“¸", "ì´ë²¤íŠ¸/ë¬¸í™”ê¸°íš ğŸª", "ì„œë¹„ìŠ¤ ê¸°íš ğŸ§­", "ì„¸ì¼ì¦ˆ/íŒŒíŠ¸ë„ˆì‹­ ğŸ¤"],
        "why": ["ì‚¬ëŒ/íŠ¸ë Œë“œ ê°ê°ì´ ë›°ì–´ë‚¨", "ìƒˆë¡œìš´ ì‹œë„ë¥¼ ë¹ ë¥´ê²Œ ì‹¤í–‰", "ë‹¤ì–‘í•œ ê´€ê³„ë¥¼ í†µí•´ ê¸°íšŒë¥¼ ë§Œë“¦"],
        "learn": ["íŠ¸ë Œë“œ ë¦¬ì„œì¹˜ ë£¨í‹´", "í¬íŠ¸í´ë¦¬ì˜¤(ìº í˜ì¸/ê¸°íšì„œ)", "ë°œí‘œ/í”¼ì¹­", "ê¸°ë³¸ ë°ì´í„° ë¦¬í„°ëŸ¬ì‹œ"],
    },

    "ISTJ": {
        "nickname": "í˜„ì‹¤ì£¼ì˜ì ğŸ§±âœ…",
        "strengths": ["ì±…ì„ê°", "ì •í™•ì„±", "ì²´ê³„", "ì‹ ë¢°"],
        "careers": ["íšŒê³„/ì¬ë¬´ ğŸ’°", "í’ˆì§ˆ/QA ğŸ§ª", "ê³µë¬´/í–‰ì • ğŸ›ï¸", "ë°ì´í„° ê´€ë¦¬/ìš´ì˜ âš™ï¸", "ë²•ë¬´/ì»´í”Œë¼ì´ì–¸ìŠ¤ âš–ï¸"],
        "why": ["ê·œì •/í”„ë¡œì„¸ìŠ¤ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜", "ì„¸ë°€í•œ ê²€ì¦ê³¼ ë°˜ë³µ ì—…ë¬´ì— ê°•í•¨", "ë¦¬ìŠ¤í¬ë¥¼ ì¤„ì´ëŠ” ìŠµê´€"],
        "learn": ["ë¬¸ì„œí™”/í‘œì¤€í™”", "ì—‘ì…€Â·SQL ê¸°ì´ˆ", "ë‚´ë¶€í†µì œ/ë¦¬ìŠ¤í¬ ê´€ë¦¬", "ì—…ë¬´ ìë™í™”(ê°„ë‹¨ íŒŒì´ì¬)"],
    },
    "ISFJ": {
        "nickname": "ìˆ˜í˜¸ì ğŸ§¸ğŸ›¡ï¸",
        "strengths": ["ë°°ë ¤", "ì„±ì‹¤í•¨", "ì§€ì›", "ë””í…Œì¼"],
        "careers": ["ê°„í˜¸/ë³´ê±´ ğŸ©º", "êµìœ¡/ëŒë´„ ğŸ§‘â€ğŸ«", "ê³ ê°ì„±ê³µ(CS/CSM) ğŸ’¬", "ìš´ì˜/ì´ë¬´ ğŸ—‚ï¸", "í–‰ì •/ì½”ë””ë„¤ì´í„° ğŸ“Œ"],
        "why": ["ì‚¬ëŒì„ ë„ìš°ë©° ì•ˆì •ì ìœ¼ë¡œ ì¼í•˜ëŠ” í™˜ê²½ ì„ í˜¸", "ê¼¼ê¼¼í•œ ì§€ì›ê³¼ ìš´ì˜ ëŠ¥ë ¥", "ì‹ ë¢° ê¸°ë°˜ ê´€ê³„ í˜•ì„±"],
        "learn": ["ì„œë¹„ìŠ¤ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜", "ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ ì„¤ê³„", "ê¸°ì´ˆ ë°ì´í„° ì •ë¦¬", "ê°ˆë“± ìƒí™© ëŒ€ì‘ ì‹œë‚˜ë¦¬ì˜¤"],
    },
    "ESTJ": {
        "nickname": "ê´€ë¦¬ì ğŸ§­ğŸ“‹",
        "strengths": ["ì¡°ì§í™”", "ì‹¤í–‰ë ¥", "í˜„ì¥ ë¦¬ë”©", "ê²°ë‹¨"],
        "careers": ["ìš´ì˜ ë§¤ë‹ˆì € âš™ï¸", "ì˜ì—…/ì§€ì ê´€ë¦¬ ğŸª", "í”„ë¡œì íŠ¸ ë¦¬ë” ğŸ—‚ï¸", "ìƒì‚°/ë¬¼ë¥˜ ğŸšš", "ê³µê³µ/ì •ì±… ì§‘í–‰ ğŸ›ï¸"],
        "why": ["í˜„ì‹¤ì ì¸ ë¬¸ì œ í•´ê²°ê³¼ ì‹¤í–‰ì— ê°•í•¨", "íŒ€ì˜ ê·œìœ¨/ì„±ê³¼ë¥¼ ë§Œë“¤ê¸° ì‰¬ì›€", "ëª…í™•í•œ ëª©í‘œì™€ ì§€í‘œ ì„ í˜¸"],
        "learn": ["KPI/ì„±ê³¼ê´€ë¦¬", "ë¦¬ë”ì‹­ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜", "í˜‘ìƒ", "ì—…ë¬´ í‘œì¤€í™”/ë§¤ë‰´ì–¼"],
    },
    "ESFJ": {
        "nickname": "ì¹œì„ ë„ëª¨ì ğŸ’—ğŸ€",
        "strengths": ["ì¹œí™”ë ¥", "í˜‘ì—…", "ì¡°ìœ¨", "ì„œë¹„ìŠ¤ ë§ˆì¸ë“œ"],
        "careers": ["CS/ì„œë¹„ìŠ¤ ë§¤ë‹ˆì € ğŸ’¬", "HR/ì¡°ì§ì§€ì› ğŸŒ±", "êµìœ¡ ìš´ì˜ ğŸ“š", "PR/í™ë³´ ğŸ“¢", "ë³‘ì›/ê¸°ê´€ ì½”ë””ë„¤ì´í„° ğŸ¥"],
        "why": ["ê´€ê³„ í˜•ì„±ê³¼ íŒ€ì›Œí¬ì—ì„œ ê°•ì ", "ì‚¬ëŒì´ ë§ì€ í™˜ê²½ì—ì„œ ë¹›ë‚¨", "ë”°ëœ»í•œ ì„œë¹„ìŠ¤ ê²½í—˜ ì„¤ê³„"],
        "learn": ["ì»¤ë®¤ë‹ˆì¼€ì´ì…˜/ì‘ëŒ€", "ë¬¸ì œí•´ê²° í…œí”Œë¦¿", "ì´ë²¤íŠ¸ ìš´ì˜", "ê¸°ì´ˆ ê¸°íšì„œ ì‘ì„±"],
    },

    "ISTP": {
        "nickname": "ì¥ì¸ ğŸ”§ğŸ§©",
        "strengths": ["ë¬¸ì œ í•´ê²°", "ì†ì— ì¡íˆëŠ” ì‹¤í—˜", "ì¹¨ì°©í•¨", "ë„êµ¬ í™œìš©"],
        "careers": ["ì—”ì§€ë‹ˆì–´(ê¸°ê³„/ì „ê¸°) âš™ï¸", "ê°œë°œì ğŸ’»", "ë°ì´í„°/ì‹œìŠ¤í…œ ìš´ì˜ ğŸ› ï¸", "ë³´ì•ˆ/ë„¤íŠ¸ì›Œí¬ ğŸ›¡ï¸", "ì œí’ˆ í…ŒìŠ¤íŠ¸/QA ğŸ§ª"],
        "why": ["ì›ì¸-ê²°ê³¼ë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…", "ë„êµ¬/ê¸°ìˆ ë¡œ í•´ê²°í•˜ëŠ” ì„±í–¥", "í˜„ì¥í˜• ë¬¸ì œ í•´ê²°ì— ê°•í•¨"],
        "learn": ["ì‹¤ìŠµ ì¤‘ì‹¬ í•™ìŠµ(í”„ë¡œì íŠ¸)", "ë””ë²„ê¹… ë£¨í‹´", "ê¸°ìˆ  ë¬¸ì„œ ì½ê¸°", "ë©”ì´ì»¤ í™œë™(ì•„ë‘ì´ë…¸ ë“±)"],
    },
    "ISFP": {
        "nickname": "ì˜ˆìˆ ê°€ ğŸŒ¿ğŸ¨",
        "strengths": ["ê°ê°", "ìœ ì—°í•¨", "í˜„ì¬ ëª°ì…", "ê°œì„±"],
        "careers": ["ë””ìì´ë„ˆ ğŸ¨", "ì‚¬ì§„/ì˜ìƒ ğŸ“¸", "ê³µì˜ˆ/ë©”ì´ì»¤ ğŸ§µ", "UX/UI ğŸ§©", "ë¼ì´í”„ìŠ¤íƒ€ì¼ ë¸Œëœë“œ ğŸª´"],
        "why": ["ê°ê°ì  í‘œí˜„ê³¼ ê²½í—˜ ì„¤ê³„ì— ê°•í•¨", "ìê¸° ìŠ¤íƒ€ì¼ì„ êµ¬í˜„í•˜ëŠ” ì‘ì—… ì„ í˜¸", "ìœ ì—°í•œ í™˜ê²½ì—ì„œ ì„±ì¥"],
        "learn": ["ì‘í’ˆ í¬íŠ¸í´ë¦¬ì˜¤", "ë¸Œëœë”© ê¸°ì´ˆ", "í”¼ê·¸ë§ˆ/í”„ë¦¬ë¯¸ì–´ ë“±", "í¬ë¦¬ì—ì´í‹°ë¸Œ ë£¨í‹´(ë§¤ì¼ 1ê°œ)"],
    },
    "ESTP": {
        "nickname": "ëª¨í—˜ê°€ ğŸï¸âš¡",
        "strengths": ["ìˆœë°œë ¥", "í˜„ì¥ ëŒ€ì‘", "ëŒ€ë‹´í•¨", "ì‹¤ì „ ê°ê°"],
        "careers": ["ì„¸ì¼ì¦ˆ ğŸ¯", "ì´ë²¤íŠ¸/í”„ë¡œëª¨ì…˜ ğŸª", "ì°½ì—… ğŸ§¨", "ìŠ¤í¬ì¸ /ì½”ì¹­ ğŸ…", "íŠ¸ë ˆì´ë”©/ë¦¬ìŠ¤í¬ ì§ë¬´(ì„±í–¥ë§ì¶¤) ğŸ“‰"],
        "why": ["ë¹ ë¥¸ ì˜ì‚¬ê²°ì •ê³¼ í˜„ì¥ ì‹¤í–‰", "ì‚¬ëŒ/ê¸°íšŒ í¬ì°©ì— ê°•í•¨", "ë³€í™”ê°€ í° í™˜ê²½ì—ì„œ ì ì‘"],
        "learn": ["í˜‘ìƒ/í”¼ì¹­", "í˜„ì¥ ìš´ì˜ ê²½í—˜", "ë°ì´í„°ë¡œ ì„±ê³¼ ì¸¡ì •", "ë¦¬ìŠ¤í¬ ê´€ë¦¬ ìŠµê´€"],
    },
    "ESFP": {
        "nickname": "ì—°ì˜ˆì¸ ğŸŒˆğŸ¤",
        "strengths": ["í‘œí˜„ë ¥", "ë¶„ìœ„ê¸° ë©”ì´í‚¹", "ì‚¬êµì„±", "ê³µê°"],
        "careers": ["í¬ë¦¬ì—ì´í„°/ë°©ì†¡ ğŸ¥", "ë§ˆì¼€íŒ…/ë¸Œëœë“œ ğŸ“£", "ì„œë¹„ìŠ¤/í˜¸ìŠ¤í”¼íƒˆë¦¬í‹° ğŸ¨", "êµìœ¡/í¼í¬ë¨¼ìŠ¤ ğŸ­", "ì»¤ë®¤ë‹ˆí‹° ìš´ì˜ ğŸ«¶"],
        "why": ["ì‚¬ëŒ ì•ì—ì„œ ë¹›ë‚˜ëŠ” í‘œí˜„ë ¥", "ê²½í—˜ì„ ì¬ë¯¸ìˆê²Œ ì„¤ê³„", "ê´€ê³„ ì¤‘ì‹¬ ì—…ë¬´ì— ê°•í•¨"],
        "learn": ["ìŠ¤í† ë¦¬í…”ë§/ì½˜í…ì¸  ê¸°íš", "ì´¬ì˜/í¸ì§‘ ê¸°ì´ˆ", "ë¸Œëœë”©", "ë¬´ëŒ€/ë°œí‘œ í›ˆë ¨"],
    },
}

MBTI_LIST = list(MBTI_DATA.keys())

# ---------------------------
# Helper functions
# ---------------------------
def sparkle_text(text: str) -> str:
    sparkles = ["âœ¨", "ğŸŒŸ", "ğŸ’«", "ğŸª„"]
    return f"{random.choice(sparkles)} {text} {random.choice(sparkles)}"

def make_badges(items):
    return " ".join([f"<span class='pill'>{x}</span>" for x in items])

def random_quote():
    quotes = [
        "ì‘ì€ ìŠµê´€ì´ í° ì§„ë¡œë¥¼ ë§Œë“ ë‹¤ ğŸŒ±",
        "í¥ë¯¸ëŠ” ìµœê³ ì˜ ë‚˜ì¹¨ë°˜ ğŸ§­",
        "ì˜¤ëŠ˜ì˜ 30ë¶„ì´ ë‚´ì¼ì˜ ì‹¤ë ¥ ğŸ’ª",
        "ì™„ë²½ë³´ë‹¤ ê¾¸ì¤€í•¨! ğŸ”¥",
        "ê²½í—˜ì€ ìµœê³ ì˜ ìŠ¤í™ ğŸ’",
    ]
    return random.choice(quotes)

# ---------------------------
# Sidebar
# ---------------------------
st.sidebar.markdown("## ğŸ§­ ì„¤ì •")
selected = st.sidebar.selectbox("ë‹¹ì‹ ì˜ MBTIë¥¼ ì„ íƒí•˜ì„¸ìš” ğŸ’–", MBTI_LIST, index=0)

mode = st.sidebar.radio(
    "ì¶”ì²œ ìŠ¤íƒ€ì¼ ğŸ›ï¸",
    ["ë°¸ëŸ°ìŠ¤ ì¶”ì²œ ğŸ¯", "ì°½ì˜/ì½˜í…ì¸  ìª½ âœï¸", "ê¸°ìˆ /ë°ì´í„° ìª½ ğŸ¤–", "ì‚¬ëŒ/êµìœ¡ ìª½ ğŸ¤"],
    index=0,
)

show_detail = st.sidebar.toggle("ìƒì„¸ ì„¤ëª… ë³´ê¸° ğŸ”", value=True)
show_fun = st.sidebar.toggle("ë¯¸ë‹ˆ ê²Œì„/ëœë¤ ìš”ì†Œ ğŸ²", value=True)

st.sidebar.markdown("---")
st.sidebar.markdown("### ğŸ ì˜¤ëŠ˜ì˜ í•œ ì¤„")
st.sidebar.info(random_quote())

# ---------------------------
# Header
# ---------------------------
colA, colB = st.columns([1.35, 1])
with colA:
    st.markdown(f"<div class='glow-title'>{sparkle_text('MBTI ì§„ë¡œ ì¶”ì²œ ìŠ¤íŠœë””ì˜¤')} ğŸ§­</div>", unsafe_allow_html=True)
    st.markdown(
        "<div class='subtle'>MBTIëŠ” â€˜ì •ë‹µâ€™ì´ ì•„ë‹ˆë¼ <b>ë‚˜ë¥¼ ì´í•´í•˜ëŠ” íŒíŠ¸</b>ì˜ˆìš”. "
        "ì¶”ì²œì€ ì°¸ê³ ìš©ìœ¼ë¡œ, í¥ë¯¸Â·ê°€ì¹˜Â·ëŠ¥ë ¥Â·í™˜ê²½ì„ í•¨ê»˜ ê³ ë ¤í•´ë³´ì„¸ìš” ğŸ’¡</div>",
        unsafe_allow_html=True
    )
with colB:
    st.markdown("<div class='glass'>", unsafe_allow_html=True)
    st.markdown(f"### â±ï¸ ì§€ê¸ˆ ì‹œê°„\n**{datetime.now().strftime('%Y-%m-%d %H:%M')}**")
    st.progress(80)
    st.caption("ì§„ë¡œ íƒìƒ‰ ê²Œì´ì§€ (ê·¸ëƒ¥ ê·€ì—¬ìš´ ì¥ì‹ì´ì—ìš” ğŸ˜†)")
    st.markdown("</div>", unsafe_allow_html=True)

st.markdown("<div class='hr'></div>", unsafe_allow_html=True)

# ---------------------------
# Main content
# ---------------------------
data = MBTI_DATA[selected]
nickname = data["nickname"]

# Filter careers by mode (ê°€ë³ê²Œ â€˜ë¶„ìœ„ê¸°â€™ë§Œ ì¡°ì •)
def career_filter(careers, mode):
    creative = {"ì½˜í…ì¸ ", "ë””ìì´ë„ˆ", "ì˜ìƒ", "ì‘ê°€", "ë¸Œëœë“œ", "í¬ë¦¬ì—ì´í„°", "PR", "ë§ˆì¼€íŒ…", "ë¬¸í™”ê¸°íš", "ì´ë²¤íŠ¸"}
    tech = {"ë°ì´í„°", "AI", "ML", "ì—”ì§€ë‹ˆì–´", "ê°œë°œì", "ë³´ì•ˆ", "ë„¤íŠ¸ì›Œí¬", "ì‹œìŠ¤í…œ", "ë¶„ì„", "QA"}
    people = {"êµìœ¡", "ìƒë‹´", "ì½”ì¹­", "HR", "ì»¤ë®¤ë‹ˆí‹°", "ê³ ê°", "ê°„í˜¸", "ë³´ê±´", "ëŒë´„", "ì½”ë””ë„¤ì´í„°"}

    def tag_of(c):
        hit = 0
        for k in creative:
            if k in c:
                hit += 1
        if mode == "ì°½ì˜/ì½˜í…ì¸  ìª½ âœï¸":
            return hit
        hit2 = 0
        for k in tech:
            if k in c:
                hit2 += 1
        if mode == "ê¸°ìˆ /ë°ì´í„° ìª½ ğŸ¤–":
            return hit2
        hit3 = 0
        for k in people:
            if k in c:
                hit3 += 1
        if mode == "ì‚¬ëŒ/êµìœ¡ ìª½ ğŸ¤":
            return hit3
        return 1  # balance

    ranked = sorted(careers, key=lambda x: tag_of(x), reverse=True)
    return ranked

careers_ranked = career_filter(data["careers"], mode)

left, right = st.columns([1.05, 0.95], gap="large")

with left:
    st.markdown("<div class='glass'>", unsafe_allow_html=True)
    st.markdown(f"## {selected} {nickname}  {random.choice(['ğŸ§ ','ğŸ’–','ğŸ”¥','ğŸŒˆ','âš¡'])}")
    st.markdown("### ğŸ§© ì¶”ì²œ ì§ì—… TOP")
    for i, c in enumerate(careers_ranked[:5], start=1):
        st.markdown(f"**{i}. {c}**")
    st.markdown("<div class='hr'></div>", unsafe_allow_html=True)

    st.markdown("### ğŸ’ª ê°•ì  í‚¤ì›Œë“œ")
    st.markdown(make_badges([f"ğŸ’ {x}" for x in data["strengths"]]), unsafe_allow_html=True)

    if show_detail:
        st.markdown("<div class='hr'></div>", unsafe_allow_html=True)
        st.markdown("### ğŸ” ì™œ ì´ëŸ° ì§ì—…ì´ ì–´ìš¸ë¦´ê¹Œ?")
        for w in data["why"]:
            st.markdown(f"- {w} âœ¨")

    st.markdown("</div>", unsafe_allow_html=True)

with right:
    st.markdown("<div class='glass'>", unsafe_allow_html=True)
    st.markdown("## ğŸ’ ì˜¤ëŠ˜ë¶€í„° í•˜ëŠ” ì§„ë¡œ ì•¡ì…˜ í”Œëœ")
    st.markdown("### ğŸª„ ì¶”ì²œ í•™ìŠµ/í™œë™")
    tips = data["learn"][:]
    if show_fun:
        random.shuffle(tips)
    for t in tips[:4]:
        st.markdown(f"- {t} {random.choice(['ğŸ“Œ','ğŸ§ ','ğŸ› ï¸','ğŸ¯','ğŸŒŸ'])}")

    st.markdown("<div class='hr'></div>", unsafe_allow_html=True)

    st.markdown("### ğŸ§ª ë¯¸ë‹ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸ (3ë¶„)")
    checks = [
        "ì´ ì§ì—…ì„ í•˜ëŠ” â€˜ì‚¬ëŒâ€™ì˜ í•˜ë£¨ë¥¼ ìœ íŠœë¸Œ/ë¸”ë¡œê·¸ë¡œ ì°¾ì•„ë³´ê¸° ğŸ”",
        "ê´€ë ¨ ê³¼ëª©/ê¸°ìˆ  1ê°œë¥¼ ì •í•´ 7ì¼ ì±Œë¦°ì§€ í•˜ê¸° ğŸ—“ï¸",
        "ë‚˜ë§Œì˜ í¬íŠ¸í´ë¦¬ì˜¤ í´ë” ë§Œë“¤ê¸°(ì‘ì€ ê¸°ë¡ë¶€í„°) ğŸ“",
        "ì¸í„°ë·° ì§ˆë¬¸ 5ê°œ ë½‘ì•„ì„œ í˜„ì§ìì—ê²Œ ë¬¼ì–´ë³´ê¸° ğŸ’¬",
    ]
    for c in checks:
        st.checkbox(c, value=False)

    st.markdown("</div>", unsafe_allow_html=True)

st.markdown("<div class='hr'></div>", unsafe_allow_html=True)

# ---------------------------
# Extra: Explore by category
# ---------------------------
st.markdown("<div class='glass'>", unsafe_allow_html=True)
st.markdown("## ğŸŒˆ ì§„ë¡œ íƒìƒ‰ ë†€ì´í„° (ì§ì—…ì„ ë” ë„“ê²Œ ë³´ê¸°)")

c1, c2, c3, c4 = st.columns(4)

clusters = {
    "ğŸ§  ê¸°íšÂ·ì „ëµ": ["PM ğŸ§­", "ì „ëµ ê¸°íš ğŸ—ºï¸", "ì»¨ì„¤íŒ… ğŸ§©", "ì‚¬ì—…ê°œë°œ ğŸ¤"],
    "ğŸ¤– ê¸°ìˆ Â·ë°ì´í„°": ["ê°œë°œ ğŸ’»", "ë°ì´í„° ğŸ“Š", "AI ğŸ¤–", "ë³´ì•ˆ ğŸ›¡ï¸"],
    "ğŸ¨ ì½˜í…ì¸ Â·ë””ìì¸": ["ë¸Œëœë”© ğŸ¨", "ì˜ìƒ ğŸ¬", "ì‘ê°€ âœï¸", "UX/UI ğŸ§©"],
    "ğŸ¤ ì‚¬ëŒÂ·êµìœ¡": ["êµìœ¡ ğŸ¤", "ìƒë‹´ ğŸ§‘â€ğŸ«", "HR ğŸŒ±", "ì»¤ë®¤ë‹ˆí‹° ğŸ«¶"],
}

def cluster_card(title, items, emoji):
    st.markdown("<div class='metricish'>", unsafe_allow_html=True)
    st.markdown(f"### {emoji} {title}")
    for it in items:
        st.write(f"â€¢ {it}")
    st.markdown("</div>", unsafe_allow_html=True)

with c1: cluster_card("ê¸°íšÂ·ì „ëµ", clusters["ğŸ§  ê¸°íšÂ·ì „ëµ"], "ğŸ§ ")
with c2: cluster_card("ê¸°ìˆ Â·ë°ì´í„°", clusters["ğŸ¤– ê¸°ìˆ Â·ë°ì´í„°"], "ğŸ¤–")
with c3: cluster_card("ì½˜í…ì¸ Â·ë””ìì¸", clusters["ğŸ¨ ì½˜í…ì¸ Â·ë””ìì¸"], "ğŸ¨")
with c4: cluster_card("ì‚¬ëŒÂ·êµìœ¡", clusters["ğŸ¤ ì‚¬ëŒÂ·êµìœ¡"], "ğŸ¤")

st.caption("ğŸ’¡ íŒ: MBTIì™€ ìƒê´€ì—†ì´ â€˜í¥ë¯¸ê°€ ìƒê¸°ëŠ” í´ëŸ¬ìŠ¤í„°â€™ë¥¼ ê¸°ì¤€ìœ¼ë¡œ íƒìƒ‰í•˜ë©´ ë” ë¹ ë¥´ê²Œ ê¸¸ì´ ë³´ì—¬ìš”.")
st.markdown("</div>", unsafe_allow_html=True)

# ---------------------------
# Footer
# ---------------------------
st.markdown("<div class='hr'></div>", unsafe_allow_html=True)
st.info("ğŸ“Œ ì•ˆë‚´: MBTI ê¸°ë°˜ ì¶”ì²œì€ ì°¸ê³ ìš©ì…ë‹ˆë‹¤. ì‹¤ì œ ì§„ë¡œ ì„ íƒì€ í¥ë¯¸/ê°€ì¹˜/ì—­ëŸ‰/í™˜ê²½(ì‹œì¥, ì§€ì—­, í•™ìŠµ ê°€ëŠ¥ì„±)ì„ í•¨ê»˜ ê³ ë ¤í•˜ì„¸ìš” ğŸ™‚")
